<!-- 
    RANGE: Most of the code is redundant and hera as inheritance boilerplate.
    The relevant code is marked with a comment.
    ADDED LOC ~3
 -->

<sg-calendar cdkTrapFocus
              [id]="datepicker.id"
              [ngClass]="datepicker.panelClass"
              [startAt]="datepicker.startAt"
              [startView]="datepicker.startView"
              [minDate]="datepicker._minDate"
              [maxDate]="datepicker._maxDate"
              [dateFilter]="datepicker._dateFilter"
              [headerComponent]="datepicker.calendarHeaderComponent"
              [selected]="datepicker._selected"
              [@fadeInCalendar]="'enter'"
              (selectedChange)="datepicker._select($event)"
              (yearSelected)="datepicker._selectYear($event)"
              (monthSelected)="datepicker._selectMonth($event)"

              [range]="!!sgDatepicker._datepickerInputRangeEnd"
              [selectedRangeEnd]="sgDatepicker._selectedRangeEnd"
              (selectedRangeEndChange)="sgDatepicker._select($event)"
              (_userSelection)="onUserSelection()">
              <!-- 
                    THE 3 LINES ABOVE ARE THE ONLY ADDITION
                    The _userSelection will pass logic handling to the datepicker component
                    instead of closing the dialog/popup, this is because range logic is handled there.

                    The other attributes are passing on the additional date (Range end) bindings
                    and a flag that sets range on/off based on the input range.
                    This means that an *ngIf on that input by the user can toggle range on/off without
                    a special flag.
              -->

</sg-calendar>